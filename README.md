
# ğŸ“˜ **Monte Carlo Risk Engine**

__(ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ ĞµÑ‰Ğµ Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑÑ README Ğ¸ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²ÑÑ‚ÑÑ Ñ‚ĞµÑÑ‚Ñ‹. ĞĞ¾ ÑĞ°Ğ¼Ğ° Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°)__ 

Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ C++-Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ° Ñ€Ğ¸ÑĞºĞ° Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ĞµĞ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ¼ ĞœĞ¾Ğ½Ñ‚Ğµ-ĞšĞ°Ñ€Ğ»Ğ¾.

ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚:

* Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ†ĞµĞ½,
* Ğ¿Ğ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ñ€Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑÑ€ĞµĞ·Ğ° (spot, Î¼, Ïƒ, ĞºĞ¾Ñ€Ñ€ĞµĞ»ÑÑ†Ğ¸Ğ¸),
* Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ñ… Ñ†ĞµĞ½,
* Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚ **Value-at-Risk (VaR)** Ğ¸ **Expected Shortfall (ES)**,
* Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºÑƒÑ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ **Dow Jones Industrial Average (DJIA)**,
* Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ (realized) VaR.

---

# ğŸ¯ **1. Ğ§Ñ‚Ğ¾ Ğ´ĞµĞ»Ğ°ĞµÑ‚ ÑÑ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚**

Ğ”Ğ²Ğ¸Ğ¶Ğ¾Ğº Ğ¾Ñ†ĞµĞ½Ğ¸Ğ²Ğ°ĞµÑ‚ Ñ€Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ñ€Ğ¸ÑĞº Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ Ğ½Ğ° Ğ³Ğ¾Ñ€Ğ¸Ğ·Ğ¾Ğ½Ñ‚Ğµ Ğ² *N* Ğ´Ğ½ĞµĞ¹ Ğ´Ğ²ÑƒĞ¼Ñ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼Ğ¸:

### **1) Monte Carlo VaR / ES**

Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ñ†ĞµĞ½Ñ‹ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¾Ğ² Ğ¿Ğ¾Ğ´ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒÑ Ğ³ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ±Ñ€Ğ¾ÑƒĞ½Ğ¾Ğ²ÑĞºĞ¾Ğ³Ğ¾ Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ:

$$S_t = S_0 \exp\left((\mu - 0.5\sigma^2)t + \sigma\sqrt{t} Z\right)$$

Ğ³Ğ´Ğµ ĞºĞ¾Ñ€Ñ€ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑˆÑƒĞ¼Ñ‹ ( $Z$) ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Ñ€Ğ°Ğ·Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¥Ğ¾Ğ»ĞµÑ†ĞºĞ¾Ğ³Ğ¾.

### **2) Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ (Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹) VaR / ES**

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ†ĞµĞ½Ñ‹ Ğ¿Ğ¾ÑĞ»Ğµ snapshot-Ğ´Ğ°Ñ‚Ñ‹.

---

# ğŸ“Š **2. Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ VaR Ğ¸ ES**

### **Value-at-Risk (VaR)**

VaR ÑƒÑ€Ğ¾Ğ²Ğ½Ñ $95%$ â€” ÑÑ‚Ğ¾ Ñ‚Ğ°ĞºĞ°Ñ Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ **Ğ½Ğµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ° Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒÑ %95%$**.

$$\text{VaR} = - \text{quantile}_{0.05}(P&L)$$

### **Expected Shortfall (ES)**

Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ **Ğ² Ñ…ÑƒĞ´ÑˆĞ¸Ñ… $5%$ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²**.

$$\text{ES} = -E[P&L \mid P&L \le \text{VaR}]$$

ES ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ±Ğ¾Ğ»ĞµĞµ ĞºĞ¾Ğ½ÑĞµÑ€Ğ²Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¾Ğ¹.

---

# ğŸ› **3. Ğ§Ñ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğµ DJIA Ğ¸ Ğ·Ğ°Ñ‡ĞµĞ¼ Ğ¾Ğ½ Ğ·Ğ´ĞµÑÑŒ**

Dow Jones Industrial Average â€” Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· ÑÑ‚Ğ°Ñ€ĞµĞ¹ÑˆĞ¸Ñ… Ğ¸ ÑĞ°Ğ¼Ñ‹Ñ… Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ñ… Ğ¸Ğ½Ğ´ĞµĞºÑĞ¾Ğ² Ğ¼Ğ¸Ñ€Ğ°.
Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ **30 ĞºÑ€ÑƒĞ¿Ğ½ĞµĞ¹ÑˆĞ¸Ñ… Ğ°Ğ¼ĞµÑ€Ğ¸ĞºĞ°Ğ½ÑĞºĞ¸Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹**.

Ğ’ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼ Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ DJIA:

* Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ CSV-Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹ Ñ†ĞµĞ½ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¸Ğ· 30 Ñ‚Ğ¸ĞºĞµÑ€Ğ¾Ğ²,
* Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ÑÑ snapshot-Ğ´Ğ°Ñ‚Ğ°,
* Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ Ğ²ĞµÑ Ğ¿Ñ€Ğ¾Ğ¿Ğ¾Ñ€Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ñ†ĞµĞ½Ğµ,
* ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑÑ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ Ğ½Ğ° Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½ÑƒÑ ÑÑƒĞ¼Ğ¼Ñƒ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, $10M).

Ğ­Ñ‚Ğ¾Ñ‚ Ñ€ĞµĞ¶Ğ¸Ğ¼ ÑƒĞ´Ğ¾Ğ±ĞµĞ½ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ€Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹.

---

# ğŸ§© **4. ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹**


---

## ğŸ“ `market_data_history.*`

Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ†ĞµĞ½Ñ‹ Ğ¸Ğ· CSV:

* `load_directory(path)` â€” Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ²ÑĞµÑ… Ñ‚Ğ¸ĞºĞµÑ€Ğ¾Ğ².
* `get_price(ticker, date)` â€” Ñ†ĞµĞ½Ğ° Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ.
* `get_past_dates(snapshot, N)` â€” N Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ´Ğ°Ñ‚.
* `get_future_dates(snapshot, N)` â€” N Ğ¿Ğ¾ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ñ… Ğ´Ğ°Ñ‚.
* `get_all_dates()` â€” Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ´Ğ°Ñ‚ Ğ¿Ğ¾ Ñ‚Ğ¸ĞºĞµÑ€Ğ°Ğ¼.

---

## ğŸ“ `market_snapshot.*`

Ğ¡Ñ‚Ñ€Ğ¾Ğ¸Ñ‚ Â«Ñ€Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ ÑÑ€ĞµĞ·Â»:

* spot-Ñ†ĞµĞ½Ñ‹ Ğ½Ğ° snapshot-Ğ´ĞµĞ½ÑŒ,
* ÑÑ€ĞµĞ´Ğ½Ğ¸Ğµ Ğ»Ğ¾Ğ³-Ğ´Ğ¾Ñ…Ğ¾Ğ´Ğ½Ğ¾ÑÑ‚Ğ¸ `mu`,
* Ğ²Ğ¾Ğ»Ğ°Ñ‚Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ `sigma`,
* ĞºĞ¾Ñ€Ñ€ĞµĞ»ÑÑ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ğ°.

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ĞºĞ°Ğº Ğ²Ñ…Ğ¾Ğ´ Ğ² Monte Carlo.

---

## ğŸ“ `cholesky.*`

Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ·Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ¥Ğ¾Ğ»ĞµÑ†ĞºĞ¾Ğ³Ğ¾ Ğ´Ğ»Ñ ĞºĞ¾Ñ€Ñ€ĞµĞ»ÑÑ†Ğ¸Ğ¹:


$$L * L^T = Corr$$


Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ĞºĞ¾Ñ€Ñ€ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ñ… Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ½.

---

## ğŸ“ `portfolio.*`

ĞŸĞ°Ñ€ÑĞµÑ€ CSV-Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ.

ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚:

* Ğ°ĞºÑ†Ğ¸Ğ¸,
* Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ñ‹ CALL/PUT (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚).

---

## ğŸ“ `monte_carlo.*`

Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ + ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ P&L:

* ĞºĞ¾Ñ€Ñ€ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ÑˆÑƒĞ¼Ñ‹,
* Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ñ… Ñ†ĞµĞ½,
* VaR / ES.

---

## ğŸ“ `realized_risk.*`

Ğ¡Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ VaR:

* ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ñ†ĞµĞ½Ñ‹,
* ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ñ„Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğ¸,
* Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ VaR/ES Ğ¿Ğ¾ worst-case Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ¼.

---

## ğŸ“ `djia_builder.*`

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ DJIA Ğ½Ğ° ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ.

---

## ğŸ“ `trading_day_utils.*`

Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ñ‹Ñ€Ğ°Ğ²Ğ½Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ°Ñ‚ (nearest common trading day).

---

# ğŸ³ **5. Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Docker**

## Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€:

```bash
docker build -t risk-engine .
```

---

# â–¶ **6. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹**

## 6.1. Ğ ĞµĞ¶Ğ¸Ğ¼ DJIA (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ)

Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ DJIA-Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»ÑŒ + ÑÑ€Ğ°Ğ·Ñƒ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ Ñ€Ğ¸ÑĞº.

```bash
docker run --rm risk-engine \
    --djia 2025-08-08 \
    --value 10000000
```

---

## 6.2. Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ğ¾Ñ€Ñ‚Ñ„ĞµĞ»Ñ

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ CSV-Ñ„Ğ°Ğ¹Ğ»:

```bash
docker run --rm risk-engine \
    --portfolio data/portfolio.csv \
    --snapshot 2025-08-08 \
    --history data/history/djia \
    --lookback 252 \
    --horizon 10 \
    --scenarios 10000
```

---

# ğŸ§ª **7. Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²**

```bash
docker run --rm --entrypoint ./build/test_risk_engine risk-engine
```

---

# ğŸ“„ **8. Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ PDF-Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ (Ğ½Ğµ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ° Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ)**

Ğ”Ğ¾ĞºÑĞ¸ Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½ Ğ² Dockerfile, Ğ½Ğ¾ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ĞµĞ³Ğ¾:

## 8.1. Ğ Ğ°Ğ·ĞºĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ñ€Ğ¾ĞºĞ¸ Ğ² Dockerfile:

```dockerfile
# RUN doxygen Doxyfile
# RUN make -C docs/latex pdf
# RUN cp docs/latex/refman.pdf manual.pdf
```

## 8.2. ĞŸĞµÑ€ĞµÑĞ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€:

```bash
docker build -t risk-engine .
```

## 8.3. Ğ’Ñ‹Ğ½ÑƒÑ‚ÑŒ PDF Ğ¸Ğ· ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°:

```bash
docker run --rm --entrypoint cat risk-engine /app/docs/latex/refman.pdf > manual.pdf
```

PDF Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ Ğ² Ğ²Ğ°ÑˆĞµĞ¹ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸.

---

# ğŸ—‚ **9. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°**

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ monte_carlo.cpp
â”‚   â”œâ”€â”€ market_data_history.cpp
â”‚   â”œâ”€â”€ market_snapshot.cpp
â”‚   â”œâ”€â”€ portfolio.cpp
â”‚   â”œâ”€â”€ realized_risk.cpp
â”‚   â”œâ”€â”€ djia_builder.cpp
â”‚   â”œâ”€â”€ trading_day_utils.cpp
â”‚   â””â”€â”€ cholesky.cpp
â”œâ”€â”€ include/...
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ history/djia/*.csv
â”‚   â””â”€â”€ portfolio_djia.csv
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ latex/
â”‚   â””â”€â”€ html/
â”œâ”€â”€ CMakeLists.txt
â””â”€â”€ Dockerfile
```

---

# ğŸ“Œ **10. ĞšÑ€Ğ°Ñ‚ĞºĞ¸Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹**

```
=== GENERATING DJIA PORTFOLIO FOR 2025-08-08 ===
Portfolio saved: data/portfolio_djia.csv

=== MONTE CARLO RISK ===
VaR abs = 36575.8
VaR rel = 0.00365988
ES  abs = 45692.9
ES  rel = 0.00457217

=== REALIZED (HISTORICAL) RISK ===
VaR abs = 45450.9
VaR rel = 0.00454795
ES  abs = 45450.9
ES  rel = 0.00454795
```

